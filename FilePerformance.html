<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2018-12-27 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>RRD4J &#x2013; File Layout</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20181227" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                RRD4J
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2018-12-27</span>
                  &nbsp;| <span id="projectVersion">Version: 3.4</span>
                      </div>
            <div class="xright">                    <a href="./" title="RRD4J">RRD4J</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                          <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>File Layout</h1>
<p>The version 1 rrd file format uses a simple format. Each RRA is an array, using the sample time as an indices. But that&#x2019;s not really efficient for disk IO. An update will generate one disk IO for each RRA. With the new version, all sample within the same archive for a given sample time is stored in the same row of a matrix. With this method each update generate a single IO. Reads generate more IO because the whole archive needs to the read within the needed range, even the useless datasources. But that&#x2019;s not a big problems because there is much more write than read. And also reads stays sequential so the caching mechanism from the file system helps a lot.</p>
<h1>File backend</h1>
<p>There is two kind of file backend in rrd4j: NIO and FILE. NIO uses mapped IO, FILE uses random access files. Don&#x2019;t assume that one is better is inferior or superior that the other, because many parameters can have dramatics influence. For example, Linux uses big IO (about 128kB) with mmaped files. The RAM will be filled with useless data and it can destroy performances. So one should tests both before making a choice.</p>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2018.
          All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
