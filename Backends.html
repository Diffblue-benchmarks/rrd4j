<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2018-12-27 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>RRD4J &#x2013; Introduction</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20181227" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                RRD4J
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2018-12-27</span>
                  &nbsp;| <span id="projectVersion">Version: 3.4</span>
                      </div>
            <div class="xright">                    <a href="./" title="RRD4J">RRD4J</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                          <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Introduction</h1>
<p>RRD4J uses backend objects to store actual bytes for RRD database.</p>
<h1>Details</h1>
<p>Each Round Robin Database object (<tt>RrdDb</tt> object) is backed with a single <tt>RrdBackend</tt> object which performs actual I/O operations on the underlying storage. The <tt>RrdBackend</tt> object is itself not created directly but through factories, that are object instanciated from <tt>RrdBackendFactory</tt> derivated classes.</p>
<p>RRD backend are registered and managed through the static methods <tt>RrdBackendFactory.setActiveFactories(RrdBackendFactory...)</tt> and <tt>RrdBackendFactory.addActiveFactories(RrdBackendFactory...)</tt>. It defined a ordered list of used factories.</p>
<p>When a RRD database is created without the factory argument and the path is given as simple string, or through the <tt>RrrDbPool</tt>, it use the first factory specified with <tt>RrdBackendFactory.setActiveFactories(RrdBackendFactory...)</tt>. But each factories can identify RrdDb using URI. So when a RrdDb is identify by an URI, each active factory is tried against this URI and the first one that accept this URI will handle it. It allows to have different of the same backend with different configuration. For more details, see the <a class="externalLink" href="https://rrd4j.github.io/rrd4j/apidocs/index.html">javadoc</a>.</p>
<p>Factory classes are used to create concrete <tt>RrdBackend</tt> implementations. Each factory creates unlimited number of specific backend objects. Rrd4j supports six different backend types (backend factories) out of the box:</p>

<ul>
  
<li><b><tt>FILE</tt></b>: objects of this class are created from the <tt>RrdFileBackendFactory</tt> class. This was the default backend used in all Rrd4j releases before 1.4.0 release. It uses <tt>java.io.*</tt> package and <tt>RandomAccessFile</tt> class to store RRD data in files on the disk. URI scheme is <tt>file</tt>.</li>
  
<li><b><tt>SAFE</tt></b>: objects of this class are created from the <tt>RrdSafeFileBackendFactory</tt> class. It uses <tt>java.io.*</tt> package and <tt>RandomAccessFile</tt> class to store RRD data in files on the disk. This backend is <i>safe</i>: it locks the underlying RRD file during update/fetch operations, and caches only static parts of a RRD file in memory. Therefore, this backend is safe to be used when RRD files should be shared between several JVMs at the same time. URI scheme is <tt>file</tt>.</li>
  
<li><b><tt>NIO</tt></b>: objects of this class are created from the <tt>RrdNioBackendFactory</tt> class. The backend uses <tt>java.io.*</tt> and <tt>java.nio.*</tt> classes (mapped <tt>ByteBuffer</tt>) to store RRD data in files on the disk. This is the default backend since 1.4.0 release. It can be quite heavy on memory, because of the memory mapping of files. URI scheme is <tt>file</tt>.</li>
  
<li><b><tt>MEMORY</tt></b>: objects of this class are created from the <tt>RrdMemoryBackendFactory</tt> class. This backend stores all data in memory. Once JVM exits, all data gets lost. The backend is extremely fast and memory hungry. URI scheme is <tt>memory</tt>.</li>
  
<li><b><tt>BERKELEY</tt></b>: objects of this class are created from the <tt>RrdBerkeleyDbBackendFactory</tt> class. It stores RRD data to ordinary disk files using <a class="externalLink" href="http://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html">Oracle Berkeley DB</a> Java Edition. URI scheme is <tt>berkeley</tt>.</li>
  
<li><b><tt>MONGODB</tt></b>: objects of this class are created from the <tt>RrdMongoDBBackendFactory</tt> class. It stores data in a <tt>DBCollection</tt> from <a class="externalLink" href="http://www.mongodb.org/">MongoDB</a>. URI scheme is <tt>mongodb</tt>.</li>
</ul>
<p>Each backend factory is identified by the scheme in the URI it can handle. Constructors are provided in the <tt>RrdDb</tt> class to create <tt>RrdDb</tt> objects (RRD databases) backed with a specific backend.</p>
<h1>Using a custom backend</h1>
<p>Any implementation of <tt>RrdBackend</tt> can be used directly when creating or opening a Rrdb. It&#x2019;s not mandatory to register it, unless if access by name is needed, like:</p>

<div class="source">
<div class="source">
<pre>RrdBackendFactory factory = new CustomFactory(...);
RrdDb db = new RrdDb(path, factory);
</pre></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2018.
          All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
